import{h as y,c as q,au as Z,av as ee,f as A,j as S,a as I,b as te,g as oe,m as le,$ as ae,a4 as O,a3 as T,a7 as c,ae as w,a8 as P,a9 as a,aa as t,W as L,ah as M,ad as Q,ab as h,ac as p,ag as K,af as j,aj as H,S as E,aw as ne,ai as U,r as B,a1 as re,ax as se,a6 as ie,ay as D,az as ce,aA as de,aB as ue,aC as me}from"./index.14bcbc69.js";import{b as pe,d as g,a as x,u as fe,Q as he}from"./use-quasar.7cf0fa9d.js";const ve=[y("g",{transform:"translate(-20,-20)"},[y("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[y("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),y("g",{transform:"translate(20,20) rotate(15 50 50)"},[y("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[y("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var N=q({name:"QSpinnerGears",props:Z,setup(e){const{cSize:l,classes:d}=ee(e);return()=>y("svg",{class:d.value,width:l.value,height:l.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},ve)}}),ye=q({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:l}){const{proxy:{$q:d}}=oe(),n=A(le,S);if(n===S)return console.error("QPage needs to be a deep child of QLayout"),S;if(A(ae,S)===S)return console.error("QPage needs to be child of QPageContainer"),S;const f=I(()=>{const o=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const i=n.isContainer.value===!0?n.containerHeight.value:d.screen.height;return e.styleFn(o,i)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-o+"px":d.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":d.screen.height-o+"px"}}),s=I(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>y("main",{class:s.value,style:f.value},te(l.default))}});const ge=e=>`
<!DOCTYPE html>
<html>
  <head>
    <title>UI on the fly mockup, made with openAI gpt3.5 and tailwindCSS</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width<% if (ctx.mode.cordova || ctx.mode.capacitor) { %>, viewport-fit=cover<% } %>">
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
    [data-id=root] {
      transition:all 0.2s;
      height: fit-content !important;
      width: fit-content !important;
      max-width:500px;
    }
    .fit-screen [data-id=root] {
        height: auto !important;
        width: auto !important;
        max-width: 100%;
    }
    </style>
  </head>
  <body>${e}</body>
</html>
`;const ke=O({name:"SketchController",props:{sketch:Object,isFavorite:Boolean,layout:String},emits:["edit","delete","favorite","fitScreen"],setup(e){return{getPromptHistory:n=>[n.prompt,...n.history.map(k=>k.prompt)].reverse(),downloadHtml:()=>{var i,_,u,b,$,v;const n=ge(((i=e==null?void 0:e.sketch)==null?void 0:i.htmlString)||""),f=new DOMParser().parseFromString(n,"text/html");(_=f.querySelector('[data-id="assistant"]'))==null||_.remove(),(u=e==null?void 0:e.sketch)!=null&&u.fitScreen&&(($=(b=f.querySelector('[data-id="root"]'))==null?void 0:b.parentElement)==null||$.classList.add("fit-screen"));const s=new Blob([f.documentElement.outerHTML],{type:"text/html"}),o=document.createElement("a");o.download=`${(v=e==null?void 0:e.sketch)==null?void 0:v.uuid}.html`,o.href=window.URL.createObjectURL(s),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}}}),Ce={class:"row q-pa-md full-width justify-center"},we=["innerHTML"];function be(e,l,d,n,k,f){return c(),w("div",Ce,[e.sketch.isFetching?(c(),P(N,{key:0,color:"black",size:"6em"})):(c(),P(U,{key:1,flat:"",bordered:"",class:"full-width"},{default:a(()=>[t(x,{dense:"",class:"bg-black text-white"},{default:a(()=>[t(L,{name:"token"}),M("div",null,Q(e.sketch.usage)+" tokens | ",1),t(L,{name:"hourglass_full"}),M("div",null,Q(Math.floor(e.sketch.duration/1e3))+" sec",1),t(pe),t(h,{size:"xs",icon:"download",dense:"",round:"",flat:"",onClick:e.downloadHtml},{default:a(()=>[t(g,null,{default:a(()=>[p(" Download HTML ")]),_:1})]),_:1},8,["onClick"]),t(h,{size:"xs",icon:"fit_screen",dense:"",round:"",flat:"",color:e.sketch.fitScreen?"white":"grey",onClick:l[0]||(l[0]=s=>e.$emit("fitScreen"))},{default:a(()=>[t(g,null,{default:a(()=>[p(" Fit Size ")]),_:1})]),_:1},8,["color"]),t(h,{size:"xs",icon:"favorite",color:e.isFavorite?"red":"white",dense:"",round:"",flat:"",onClick:l[1]||(l[1]=s=>e.$emit("favorite"))},{default:a(()=>[t(g,null,{default:a(()=>[p(" Add to favorites ")]),_:1})]),_:1},8,["color"]),t(h,{size:"xs",icon:"edit",dense:"",round:"",flat:"",onClick:l[2]||(l[2]=s=>e.$emit("edit"))},{default:a(()=>[t(g,null,{default:a(()=>[p(" Edit item ")]),_:1})]),_:1}),t(h,{size:"xs",icon:"remove",dense:"",round:"",flat:"",onClick:l[3]||(l[3]=s=>e.$emit("delete"))},{default:a(()=>[t(g,null,{default:a(()=>[p(" Delete item ")]),_:1})]),_:1})]),_:1}),t(H,null,{default:a(()=>[(c(!0),w(K,null,j(e.getPromptHistory(e.sketch),(s,o)=>(c(),w("div",{class:"text-caption",key:o},[t(L,{size:"2em",name:"chat"}),p(" "+Q(s),1)]))),128))]),_:1}),t(E),M("div",{class:ne([{"fit-screen":e.sketch.fitScreen},"html-response q-card__section q-card__section--vert"]),innerHTML:e.sketch.htmlString},null,10,we)]),_:1}))])}var $e=T(ke,[["render",be],["__scopeId","data-v-44fd3350"]]);const Se=O({name:"UIPage",props:{sketches:Array,favorites:Array,isFetching:Boolean,apiKey:String},components:{SketchController:$e},emits:["key","submit","delete","favorite","fitScreen","deleteBlock","editBlock"],setup(e,{emit:l}){const d=B(""),n=fe(),k=r=>{n.dialog({title:"Confirm",message:"Are you sure you want to delete this sketch?",cancel:!0,persistent:!0}).onOk(()=>{l("delete",r)})},f=r=>{var m;return!!((m=e.favorites)!=null&&m.find(C=>C.uuid===r.uuid))},s=r=>{n.dialog({title:"Prompt",message:"Enter edit prompt",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(m=>{l("submit",m,r)})},o=()=>{l("submit",d.value)},i=()=>{n.dialog({title:"Open AI API Key",message:`Current Key: <p class="text-caption">${e.apiKey?e.apiKey:"Not provided"}</p> Please provide an api key`,html:!0,prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(r=>{l("key",r)})},_=r=>[r.prompt,...r.history.map(m=>m.prompt)].reverse(),u=re({width:0,height:0,x:0,y:0}),b=B(!1),$=B(),v=B(),z=B(),V=(r,m)=>{const C=r.target.getAttribute("data-id");if(C&&C!=="assistant"){z.value=m.uuid,$.value=C,v.value=r.target.getAttribute("data-index");const{width:F,height:W,x:J,y:X}=r.target.getBoundingClientRect();Object.assign(u,{width:F,height:W,x:J,y:X}),b.value=!0}else v.value="",$.value="",z.value="",b.value=!1},R=r=>{const{x:m,y:C}=u,{delta:F}=r;Object.assign(u,{x:m-F.left,y:C-F.top})},G=I(()=>({width:`${u.width+8}px`,height:`${u.height+8}px`,top:`${u.y-4}px`,left:`${u.x-4}px`})),Y=se(V,10);return{newKey:i,deleteBlock:()=>{l("deleteBlock",z.value,v.value)},editBlock:()=>{n.dialog({title:"Prompt",message:"Enter block level edit prompt",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(r=>{l("editBlock",r,z.value,v.value)})},handleScroll:R,debounceMouseMove:Y,prompt:d,isFavorite:f,confirmDelete:k,editPrompt:s,newPrompt:o,getPromptHistory:_,controllerEnabled:b,getBlockControllerStyle:G,selectedBlock:$,blockDataIndex:v}}}),Be={class:"row justify-center fit q-pa-sm"},Pe={key:0,class:"row q-pa-md full-width justify-center"};function _e(e,l,d,n,k,f){const s=ie("sketch-controller");return c(),P(ye,{class:"row items-start"},{default:a(()=>[M("div",Be,[t(ue,{modelValue:e.prompt,"onUpdate:modelValue":l[0]||(l[0]=o=>e.prompt=o),readonly:e.isFetching||!e.apiKey,placeholder:e.apiKey?"Let's prompt some magic":"Please provide an API key",counter:"",filled:"",clearable:"",maxlength:"200",style:{width:"80%","margin-top":"16px"},onKeydown:ce(de(e.newPrompt,["stop","prevent"]),["enter"]),onClear:l[1]||(l[1]=o=>e.prompt="")},{append:a(()=>[!e.isFetching&&e.prompt.length>3?(c(),P(L,{key:0,name:"send",class:"cursor-pointer",onClick:e.newPrompt},null,8,["onClick"])):D("",!0)]),before:a(()=>[t(h,{rounded:"",flat:"",icon:"key",size:e.apiKey?"md":"lg",color:e.apiKey?"grey":"red",onClick:e.newKey},{default:a(()=>[t(g,null,{default:a(()=>[p(" Edit API Key ")]),_:1})]),_:1},8,["size","color","onClick"])]),_:1},8,["modelValue","readonly","placeholder","onKeydown"]),e.controllerEnabled&&!e.isFetching?(c(),w("div",{key:0,"data-id":"block-controller",style:me(e.getBlockControllerStyle)},[t(x,null,{default:a(()=>[t(h,{size:"sm",color:"blue",class:"edit",icon:"edit",dense:"",round:"",flat:"",onClick:e.editBlock},{default:a(()=>[t(g,null,{default:a(()=>[p(" Edit Block ")]),_:1})]),_:1},8,["onClick"]),t(h,{size:"sm",color:"black",class:"code",dense:"",flat:"",label:`<${e.selectedBlock}>`},null,8,["label"]),t(h,{size:"sm",color:"red",class:"delete",icon:"delete",dense:"",round:"",flat:"",onClick:e.deleteBlock},{default:a(()=>[t(g,null,{default:a(()=>[p(" Delete Block ")]),_:1})]),_:1},8,["onClick"])]),_:1})],4)):D("",!0),t(he,{onScroll:e.handleScroll},null,8,["onScroll"]),(c(!0),w(K,null,j(e.sketches,o=>(c(),w(K,{key:o.uuid},[o.isFetching?(c(),w("div",Pe,[t(U,{flat:"",bordered:"",class:"my-card"},{default:a(()=>[t(H,null,{default:a(()=>[t(N,{color:"black",size:"6em"})]),_:1}),t(H,{class:"q-pt-none text-overline"},{default:a(()=>[p(" Processing... ")]),_:1}),t(E,{inset:""})]),_:1})])):(c(),P(s,{key:1,sketch:o,"is-favorite":e.isFavorite(o),onEdit:i=>e.editPrompt(o),onDelete:i=>e.confirmDelete(o),onFavorite:i=>e.$emit("favorite",o),onFitScreen:i=>e.$emit("fitScreen",o),onClick:i=>e.debounceMouseMove(i,o)},null,8,["sketch","is-favorite","onEdit","onDelete","onFavorite","onFitScreen","onClick"])),t(E,{spaced:""})],64))),128))])]),_:1})}var Qe=T(Se,[["render",_e],["__scopeId","data-v-47e78997"]]);export{Qe as default};
